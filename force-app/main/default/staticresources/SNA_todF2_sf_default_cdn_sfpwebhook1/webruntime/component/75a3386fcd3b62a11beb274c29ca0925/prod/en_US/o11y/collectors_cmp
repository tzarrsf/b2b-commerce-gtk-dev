(function() { LWR.define("o11y/core_envelope",["exports","o11y/shared"],function(e,t){const s="o11y";class i{constructor(){this._envelope={diagnostics:{key:s,generatedTimestamp:void 0,bundleCount:0,bucketHistogramCount:0,upCounterCount:0,valueRecorderCount:0,schemaVersion:"252.11.0"},bundles:[],metrics:{bucketHistograms:[],upCounters:[],valueRecorders:[]},staticAttributes:{}}}withStaticAttributes(e){return this._envelope.staticAttributes=e,this}withLogs(e,t){let s=this._envelope.bundles.find(t=>t.schemaName===e);if(s)for(const e of t)s.messages.push(e);else s={schemaName:e,messages:t},this._envelope.bundles.push(s);return this._envelope.diagnostics.bundleCount=this._envelope.bundles.length,this}static getUpCounters(e,s=!0){return t.metricsUtility.getUpCounters(e,s)}static getValueRecorders(e,s=!0){return t.metricsUtility.getValueRecorders(e,s)}static getBucketHistograms(e,s=!0){return t.metricsUtility.getBucketHistograms(e,s)}withUpCounters(e){for(const t of e)this._envelope.metrics.upCounters.push(t);return this._envelope.diagnostics.upCounterCount=this._envelope.metrics.upCounters.length,this}withValueRecorders(e){for(const t of e)this._envelope.metrics.valueRecorders.push(t);return this._envelope.diagnostics.valueRecorderCount=this._envelope.metrics.valueRecorders.length,this}withBucketHistograms(e){for(const t of e)this._envelope.metrics.bucketHistograms.push(t);return this._envelope.diagnostics.bucketHistogramCount=this._envelope.metrics.bucketHistograms.length,this}build(){return this._envelope.diagnostics.generatedTimestamp=t.utility.time().tsNow,this._envelope}static buildFrom(e){const s=new i;return e.staticAttributes&&s.withStaticAttributes(e.staticAttributes),e.messages&&e.messages.forEach((e,i)=>{s.withLogs(t.schemaUtil.getSchemaId(i),e)}),e.upCounters&&s.withUpCounters(e.upCounters),e.valueRecorders&&s.withValueRecorders(e.valueRecorders),e.bucketHistograms&&s.withBucketHistograms(e.bucketHistograms),s.build()}}e.CoreEnvelopeBuilder=i,e.coreEnvelopeKey=s,Object.defineProperty(e,"__esModule",{value:!0})});
})();(function() { LWR.define("o11y/simple_collector",["exports","o11y/core_envelope","o11y/shared"],function(e,t,s){e.SimpleCollector=class{constructor(e){this._messageSize=0,this._isCollecting=!1;let t=1e4;if(e){const i=e.environment;i&&(this._staticAttributes={appName:i.appName,appVersion:i.appVersion,appExperience:i.appExperience,deviceId:i.deviceId,deviceModel:i.deviceModel,sdkVersion:i.sdkVersion}),s.utility.requireArgumentIfDefined(e.precollectCallback,"options.precollectCallback","function")&&(this._precollectCallback=e.precollectCallback);const r=e.maxUniqueSchemas;if(void 0!==r){if("number"!=typeof r||!(r>0))throw new Error("options.maxUniqueSchemas, if defined, must be > 0");t=r}}this._messageBuffers=new s.LazyMapToList(t)}collect(e,t,i){var r;if(!this._isCollecting){this._isCollecting=!0;try{const o={timestamp:i.timestamp,data:t,age:i.age,rootId:i.rootId,seq:i.sequence,sseq:i.schemaSequence,loggerName:i.loggerName,pagePayload:i.pagePayload,loggerAppName:i.loggerAppName,connectionType:i.connectionType,appPayload:i.appPayload,csId:i.clientSessionId,recCsId:i.receiverClientSessionId,recRootId:i.receiverRootId};if(!1===(null===(r=this._precollectCallback)||void 0===r?void 0:r.call(this,e,o)))return;if(!this._messageBuffers.push(e,o))throw new Error(`Buffer is full. Refusing schemaId ${s.schemaUtil.getSchemaId(e)}`);this._messageSize+=s.utility.estimateObjectSize(o)}finally{this._isCollecting=!1}}}get estimatedByteSize(){return this._messageSize+8*this.metricsCount}get hasData(){return this.messagesCount>0||this.metricsCount>0}get messagesCount(){return this._messageBuffers.totalItemCount}get metricsCount(){let e=0;return this._metricsExtractors&&(e+=this._metricsExtractors.getAllUpCounters().length,e+=this._metricsExtractors.getAllValueRecorders().length,e+=this._metricsExtractors.getAllBucketHistograms().length),e}getRawContentsOfCoreEnvelope(){const e={staticAttributes:this._staticAttributes,messages:this._messageBuffers.getAllMessages(!0)};return this._metricsExtractors&&(e.upCounters=t.CoreEnvelopeBuilder.getUpCounters(this._metricsExtractors.getAllUpCounters(),!0),e.valueRecorders=t.CoreEnvelopeBuilder.getValueRecorders(this._metricsExtractors.getAllValueRecorders(),!0),e.bucketHistograms=t.CoreEnvelopeBuilder.getBucketHistograms(this._metricsExtractors.getAllBucketHistograms(),!0)),this._messageSize=0,e}receiveMetricsExtractors(e){this._metricsExtractors=e}},Object.defineProperty(e,"__esModule",{value:!0})});
})();(function() { LWR.define("o11y_schema/sf_instrumentation",["exports"],function(e){e.activitySchema={namespace:"sf.instrumentation",name:"Activity",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{Activity:{reserved:[[5,5],[7,7]],fields:{stopReason:{id:6,type:"string"},isRoot:{id:8,type:"bool"},isSampled:{id:11,type:"bool"},preRootId:{id:9,type:"string"},parentId:{id:13,type:"string"},duration:{id:3,type:"double"},timerOverridden:{id:12,type:"uint32"},isRerooted:{id:15,type:"bool"},name:{options:{"(meta.max_length)":25},id:2,type:"string"},traceIdSource:{id:14,type:"string"},id:{id:1,type:"string"},userPayload:{id:4,type:"Payload"},errorCount:{id:10,type:"uint32"}}},Payload:{fields:{payload:{id:2,type:"bytes"},schemaName:{id:1,type:"string"}}}}}}}}}},e.basicPageSchema={namespace:"sf.instrumentation",name:"BasicPage",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{BasicPage:{fields:{entityType:{id:3,type:"string"},entityId:{id:2,type:"string"},url:{id:1,type:"string"}}}}}}}}}},e.coreEnvelopeSchema={namespace:"sf.instrumentation",name:"CoreEnvelope",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{MessageBundle:{fields:{messages:{rule:"repeated",id:2,type:"LogMessage"},schemaName:{id:1,type:"string"}}},Metrics:{fields:{globalMetricTags:{rule:"repeated",id:4,type:"MetricTag"},bucketHistograms:{rule:"repeated",id:3,type:"BucketHistogram"},valueRecorders:{rule:"repeated",id:2,type:"ValueRecorder"},upCounters:{rule:"repeated",id:1,type:"UpCounter"}}},CoreEnvelopeDiagnostics:{fields:{schemaVersion:{id:6,type:"string"},generatedTimestamp:{id:2,type:"double"},bundleCount:{id:3,type:"uint32"},upCounterCount:{id:4,type:"uint32"},valueRecorderCount:{id:5,type:"uint32"},key:{id:1,type:"string"},bucketHistogramCount:{id:7,type:"uint32"}}},LogMessage:{fields:{data:{id:2,type:"bytes"},rootId:{id:4,type:"string"},csId:{id:12,type:"string"},recCsId:{id:13,type:"string"},pagePayload:{id:7,type:"Payload"},connectionType:{id:9,type:"string"},appPayload:{id:10,type:"Payload"},loggerAppName:{id:8,type:"string"},sseq:{id:11,type:"uint32"},recRootId:{id:14,type:"string"},loggerName:{id:6,type:"string"},age:{id:3,type:"double"},seq:{id:5,type:"uint32"},timestamp:{id:1,type:"double"}}},CoreEnvelope:{fields:{diagnostics:{id:1,type:"CoreEnvelopeDiagnostics"},bundles:{rule:"repeated",id:2,type:"MessageBundle"},metrics:{id:3,type:"Metrics"},staticAttributes:{id:4,type:"StaticAttributes"}}},MetricTag:{fields:{name:{id:1,type:"string"},value:{id:2,type:"string"}}},BucketHistogram:{fields:{lastUpdatedTimestamp:{id:3,type:"double"},ownerName:{id:7,type:"string"},ownerAppName:{id:8,type:"string"},createdTimestamp:{id:2,type:"double"},values:{rule:"repeated",id:4,type:"double"},buckets:{rule:"repeated",id:5,type:"uint32"},name:{id:1,type:"string"},tags:{rule:"repeated",id:6,type:"MetricTag"}}},ValueRecorder:{fields:{lastUpdatedTimestamp:{id:3,type:"double"},ownerName:{id:6,type:"string"},ownerAppName:{id:7,type:"string"},createdTimestamp:{id:2,type:"double"},values:{rule:"repeated",id:4,type:"double"},name:{id:1,type:"string"},tags:{rule:"repeated",id:5,type:"MetricTag"}}},StaticAttributes:{fields:{appVersion:{id:2,type:"string"},appName:{id:1,type:"string"},deviceModel:{id:5,type:"string"},sdkVersion:{id:6,type:"string"},deviceId:{id:4,type:"string"},appExperience:{id:3,type:"string"}}},Payload:{fields:{payload:{id:2,type:"bytes"},schemaName:{id:1,type:"string"}}},UpCounter:{fields:{lastUpdatedTimestamp:{id:3,type:"double"},ownerName:{id:6,type:"string"},ownerAppName:{id:7,type:"string"},createdTimestamp:{id:2,type:"double"},name:{id:1,type:"string"},value:{id:4,type:"uint32"},tags:{rule:"repeated",id:5,type:"MetricTag"}}}}}}}}}},e.errorSchema={namespace:"sf.instrumentation",name:"Error",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{Error:{reserved:[[5,5],[7,7]],fields:{activityId:{id:6,type:"string"},stack:{id:3,type:"string"},name:{id:1,type:"string"},message:{options:{"(meta.max_length)":200},id:2,type:"string"},userPayload:{id:4,type:"Payload"}}},Payload:{fields:{payload:{id:2,type:"bytes"},schemaName:{id:1,type:"string"}}}}}}}}}},e.eventSchema={namespace:"sf.instrumentation",name:"Event",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{Event:{fields:{type:{id:1,type:"string"}}}}}}}}}},e.idleDetectorReportSchema={namespace:"sf.instrumentation",name:"IdleDetectorReport",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{IdleDetectorReport:{fields:{listenerCount:{id:3,type:"uint32"},busyTasks:{rule:"repeated",id:5,type:"string"},busyDurations:{rule:"repeated",id:6,type:"double"},pollableCount:{id:4,type:"uint32"},pollCounts:{rule:"repeated",id:8,type:"double"},logThreshold:{id:2,type:"double"},maxDuration:{id:1,type:"double"},pollables:{rule:"repeated",id:7,type:"string"}}}}}}}}}},e.instrumentedEventSchema={namespace:"sf.instrumentation",name:"InstrumentedEvent",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{MouseEvent:{reserved:[[6,6],[7,7],[15,15],[16,16],[17,17],[18,18],[19,19],[20,20],[21,21],[22,22]],fields:{cancelable:{id:5,type:"bool"},ctrlKey:{id:9,type:"bool"},type:{id:25,type:"string"},button:{id:3,type:"uint32"},offsetX:{id:30,type:"double"},eventPhase:{id:12,type:"uint32"},shiftKey:{id:23,type:"bool"},offsetY:{id:31,type:"double"},composed:{id:8,type:"bool"},altKey:{id:1,type:"bool"},isTrusted:{id:13,type:"bool"},buttons:{id:4,type:"uint32"},movementY:{id:29,type:"double"},clientY:{id:27,type:"double"},clientX:{id:26,type:"double"},movementX:{id:28,type:"double"},defaultPrevented:{id:10,type:"bool"},metaKey:{id:14,type:"bool"},timeStamp:{id:24,type:"double"},bubbles:{id:2,type:"bool"},detail:{id:11,type:"int64"},pageY:{id:33,type:"double"},pageX:{id:32,type:"double"},screenX:{id:34,type:"double"},screenY:{id:35,type:"double"}}},Event:{fields:{type:{id:1,type:"string"}}},InstrumentedEvent:{oneofs:{event:{oneof:["mouseEvent","baseEvent"]}},reserved:[[4,4],"xpath",[6,6],[8,8]],fields:{mouseEvent:{id:7,type:"MouseEvent"},auto:{id:3,type:"bool"},parentComponent:{id:2,type:"string"},baseEvent:{id:10,type:"Event"},ownerComponent:{id:1,type:"string"},userPayload:{id:5,type:"Payload"},simplePath:{id:9,type:"string"}}},Payload:{fields:{payload:{id:2,type:"bytes"},schemaName:{id:1,type:"string"}}}}}}}}}},e.mouseEventSchema={namespace:"sf.instrumentation",name:"MouseEvent",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{MouseEvent:{reserved:[[6,6],[7,7],[15,15],[16,16],[17,17],[18,18],[19,19],[20,20],[21,21],[22,22]],fields:{cancelable:{id:5,type:"bool"},ctrlKey:{id:9,type:"bool"},type:{id:25,type:"string"},button:{id:3,type:"uint32"},offsetX:{id:30,type:"double"},eventPhase:{id:12,type:"uint32"},shiftKey:{id:23,type:"bool"},offsetY:{id:31,type:"double"},composed:{id:8,type:"bool"},altKey:{id:1,type:"bool"},isTrusted:{id:13,type:"bool"},buttons:{id:4,type:"uint32"},movementY:{id:29,type:"double"},clientY:{id:27,type:"double"},clientX:{id:26,type:"double"},movementX:{id:28,type:"double"},defaultPrevented:{id:10,type:"bool"},metaKey:{id:14,type:"bool"},timeStamp:{id:24,type:"double"},bubbles:{id:2,type:"bool"},detail:{id:11,type:"int64"},pageY:{id:33,type:"double"},pageX:{id:32,type:"double"},screenX:{id:34,type:"double"},screenY:{id:35,type:"double"}}}}}}}}}},e.networkSchema={namespace:"sf.instrumentation",name:"Network",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{Network:{fields:{mtd:{id:1,type:"string"},url:{id:2,type:"string"}}}}}}}}}},e.payloadDiagsSchema={namespace:"sf.instrumentation",name:"PayloadDiags",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{PayloadDiags:{fields:{extras:{rule:"repeated",id:1,type:"string"}}}}}}}}}},e.payloadSchema={namespace:"sf.instrumentation",name:"Payload",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{Payload:{fields:{payload:{id:2,type:"bytes"},schemaName:{id:1,type:"string"}}}}}}}}}},e.simpleSchema={namespace:"sf.instrumentation",name:"Simple",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{Simple:{fields:{text:{options:{"(meta.max_length)":25},id:1,type:"string"}}}}}}}}}},e.webVitalsSchema={namespace:"sf.instrumentation",name:"WebVitals",pbjsSchema:{nested:{sf:{nested:{instrumentation:{nested:{WebVitals:{fields:{navType:{id:5,type:"string"},name:{id:1,type:"string"},delta:{id:3,type:"double"},id:{id:4,type:"string"},value:{id:2,type:"double"},wvVersion:{id:6,type:"string"}}}}}}}}}},Object.defineProperty(e,"__esModule",{value:!0})});
})();(function() { LWR.define("o11y/collectors",["exports","o11y/shared","o11y/core_envelope","o11y_schema/sf_instrumentation"],function(e,t,r,o){
/*!
     * protobuf.js v7.2.4 (c) 2016, daniel wirtz
     * compiled tue, 11 jul 2023 18:42:22 utc
     * licensed under the bsd-3-clause license
     * see: https://github.com/dcodeio/protobuf.js for details
     */
var i,n,s,a;s={1:[function(e,t,r){t.exports=function(e,t){for(var r=Array(arguments.length-1),o=0,i=2,n=!0;i<arguments.length;)r[o++]=arguments[i++];return new Promise(function(i,s){r[o]=function(e){if(n)if(n=!1,e)s(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){n&&(n=!1,s(e))}})}},{}],2:[function(e,t,r){r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;1<--t%4&&"="==(e[0|t]||"");)++r;return Math.ceil(3*e.length)/4-r};for(var o=Array(64),i=Array(123),s=0;s<64;)i[o[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var i,n=null,s=[],a=0,u=0;t<r;){var l=e[t++];switch(u){case 0:s[a++]=o[l>>2],i=(3&l)<<4,u=1;break;case 1:s[a++]=o[i|l>>4],i=(15&l)<<2,u=2;break;case 2:s[a++]=o[i|l>>6],s[a++]=o[63&l],u=0}8191<a&&((n=n||[]).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=o[i],s[a++]=61,1===u)&&(s[a++]=61),n?(a&&n.push(String.fromCharCode.apply(String,s.slice(0,a))),n.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var a="invalid encoding";r.decode=function(e,t,r){for(var o,s=r,u=0,l=0;l<e.length;){var p=e.charCodeAt(l++);if(61==p&&1<u)break;if((p=i[p])===n)throw Error(a);switch(u){case 0:o=p,u=1;break;case 1:t[r++]=o<<2|(48&p)>>4,o=p,u=2;break;case 2:t[r++]=(15&o)<<4|(60&p)>>2,o=p,u=3;break;case 3:t[r++]=(3&o)<<6|p,u=0}}if(1===u)throw Error(a);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t,r){(t.exports=function e(t,r){"string"==typeof t&&(r=t,t=n);var o=[];function i(t){if("string"!=typeof t){var r=s();if(e.verbose&&console.log("codegen: "+r),r="return "+r,t){for(var n=Object.keys(t),a=Array(n.length+1),u=Array(n.length),l=0;l<n.length;)a[l]=n[l],u[l]=t[n[l++]];return a[l]=r,Function.apply(null,a).apply(null,u)}return Function(r)()}for(var p=Array(arguments.length-1),f=0;f<p.length;)p[f]=arguments[++f];if(f=0,t=t.replace(/%([%dfijs])/g,function(e,t){var r=p[f++];switch(t){case"d":case"f":return""+ +(""+r);case"i":return""+Math.floor(r);case"j":return JSON.stringify(r);case"s":return""+r}return"%"}),f!==p.length)throw Error("parameter count mismatch");return o.push(t),i}function s(e){return"function "+(e||r||"")+"("+(t&&t.join(",")||"")+"){\n  "+o.join("\n  ")+"\n}"}return i.toString=s,i}).verbose=!1},{}],4:[function(e,t,r){function o(){this.t={}}(t.exports=o).prototype.on=function(e,t,r){return(this.t[e]||(this.t[e]=[])).push({fn:t,ctx:r||this}),this},o.prototype.off=function(e,t){if(e===n)this.t={};else if(t===n)this.t[e]=[];else for(var r=this.t[e],o=0;o<r.length;)r[o].fn===t?r.splice(o,1):++o;return this},o.prototype.emit=function(e){var t=this.t[e];if(t){for(var r=[],o=1;o<arguments.length;)r.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,r)}return this}},{}],5:[function(e,t,r){t.exports=s;var o=e(1),i=e(7)("fs");function s(e,t,r){return t="function"==typeof t?(r=t,{}):t||{},r?!t.xhr&&i&&i.readFile?i.readFile(e,function(o,i){return o&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,r):o?r(o):r(null,t.binary?i:i.toString("utf8"))}):s.xhr(e,t,r):o(s,this,e,t)}s.xhr=function(e,t,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4!==o.readyState)return n;if(0!==o.status&&200!==o.status)return r(Error("status "+o.status));if(t.binary){if(!(e=o.response))for(var e=[],i=0;i<o.responseText.length;++i)e.push(255&o.responseText.charCodeAt(i));return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,o.responseText)},t.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}},{1:1,7:7}],6:[function(e,t,r){function o(e){function t(e,t,r,o){var i=t<0?1:0;e(0===(t=i?-t:t)?0<1/t?0:2147483648:isNaN(t)?2143289344:34028234663852886e22<t?(i<<31|2139095040)>>>0:t<11754943508222875e-54?(i<<31|Math.round(t/1401298464324817e-60))>>>0:(i<<31|127+(e=Math.floor(Math.log(t)/Math.LN2))<<23|8388607&Math.round(t*Math.pow(2,-e)*8388608))>>>0,r,o)}function r(e,t,r){return t=2*((e=e(t,r))>>31)+1,r=e>>>23&255,e&=8388607,255==r?e?NaN:1/0*t:0==r?1401298464324817e-60*t*e:t*Math.pow(2,r-150)*(8388608+e)}function o(e,t,r){f[0]=e,t[r]=h[0],t[r+1]=h[1],t[r+2]=h[2],t[r+3]=h[3]}function u(e,t,r){f[0]=e,t[r]=h[3],t[r+1]=h[2],t[r+2]=h[1],t[r+3]=h[0]}function l(e,t){return h[0]=e[t],h[1]=e[t+1],h[2]=e[t+2],h[3]=e[t+3],f[0]}function p(e,t){return h[3]=e[t],h[2]=e[t+1],h[1]=e[t+2],h[0]=e[t+3],f[0]}var f,h,c,d,y;function m(e,t,r,o,i,n){var s,a=o<0?1:0;0===(o=a?-o:o)?(e(0,i,n+t),e(0<1/o?0:2147483648,i,n+r)):isNaN(o)?(e(0,i,n+t),e(2146959360,i,n+r)):17976931348623157e292<o?(e(0,i,n+t),e((a<<31|2146435072)>>>0,i,n+r)):o<22250738585072014e-324?(e((s=o/5e-324)>>>0,i,n+t),e((a<<31|s/4294967296)>>>0,i,n+r)):(e(4503599627370496*(s=o*Math.pow(2,-(o=1024===(o=Math.floor(Math.log(o)/Math.LN2))?1023:o)))>>>0,i,n+t),e((a<<31|o+1023<<20|1048576*s&1048575)>>>0,i,n+r))}function g(e,t,r,o,i){return t=e(o,i+t),o=2*((e=e(o,i+r))>>31)+1,r=4294967296*(1048575&e)+t,2047==(i=e>>>20&2047)?r?NaN:1/0*o:0==i?5e-324*o*r:o*Math.pow(2,i-1075)*(r+4503599627370496)}function v(e,t,r){c[0]=e,t[r]=d[0],t[r+1]=d[1],t[r+2]=d[2],t[r+3]=d[3],t[r+4]=d[4],t[r+5]=d[5],t[r+6]=d[6],t[r+7]=d[7]}function b(e,t,r){c[0]=e,t[r]=d[7],t[r+1]=d[6],t[r+2]=d[5],t[r+3]=d[4],t[r+4]=d[3],t[r+5]=d[2],t[r+6]=d[1],t[r+7]=d[0]}function w(e,t){return d[0]=e[t],d[1]=e[t+1],d[2]=e[t+2],d[3]=e[t+3],d[4]=e[t+4],d[5]=e[t+5],d[6]=e[t+6],d[7]=e[t+7],c[0]}function O(e,t){return d[7]=e[t],d[6]=e[t+1],d[5]=e[t+2],d[4]=e[t+3],d[3]=e[t+4],d[2]=e[t+5],d[1]=e[t+6],d[0]=e[t+7],c[0]}return"undefined"!=typeof Float32Array?(f=new Float32Array([-0]),y=128===(h=new Uint8Array(f.buffer))[3],e.writeFloatLE=y?o:u,e.writeFloatBE=y?u:o,e.readFloatLE=y?l:p,e.readFloatBE=y?p:l):(e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,n),e.readFloatLE=r.bind(null,s),e.readFloatBE=r.bind(null,a)),"undefined"!=typeof Float64Array?(c=new Float64Array([-0]),y=128===(d=new Uint8Array(c.buffer))[7],e.writeDoubleLE=y?v:b,e.writeDoubleBE=y?b:v,e.readDoubleLE=y?w:O,e.readDoubleBE=y?O:w):(e.writeDoubleLE=m.bind(null,i,0,4),e.writeDoubleBE=m.bind(null,n,4,0),e.readDoubleLE=g.bind(null,s,0,4),e.readDoubleBE=g.bind(null,a,4,0)),e}function i(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=o(o)},{}],7:[function(e,t,r){t.exports=function(e){return null}},{}],8:[function(e,t,r){var o=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=o(e);e="",r&&(e=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?0<i&&".."!==t[i-1]?t.splice(--i,2):r?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return e+t.join("/")};r.resolve=function(e,t,r){return r||(t=i(t)),!o(t)&&(e=(e=r?e:i(e)).replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t}},{}],9:[function(e,t,r){t.exports=function(e,t,r){var o=r||8192,i=o>>>1,n=null,s=o;return function(r){return r<1||i<r?e(r):(o<s+r&&(n=e(o),s=0),r=t.call(n,s,s+=r),7&s&&(s=1+(7|s)),r)}}},{}],10:[function(e,t,r){r.length=function(e){for(var t,r=0,o=0;o<e.length;++o)(t=e.charCodeAt(o))<128?r+=1:t<2048?r+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(o+1))?(++o,r+=4):r+=3;return r},r.read=function(e,t,r){if(r-t<1)return"";for(var o,i=null,n=[],s=0;t<r;)(o=e[t++])<128?n[s++]=o:191<o&&o<224?n[s++]=(31&o)<<6|63&e[t++]:239<o&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,n[s++]=55296+(o>>10),n[s++]=56320+(1023&o)):n[s++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],8191<s&&((i=i||[]).push(String.fromCharCode.apply(String,n)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,n.slice(0,s))),i.join("")):String.fromCharCode.apply(String,n.slice(0,s))},r.write=function(e,t,r){for(var o,i,n=r,s=0;s<e.length;++s)(o=e.charCodeAt(s))<128?t[r++]=o:(o<2048?t[r++]=o>>6|192:(55296==(64512&o)&&56320==(64512&(i=e.charCodeAt(s+1)))?(++s,t[r++]=(o=65536+((1023&o)<<10)+(1023&i))>>18|240,t[r++]=o>>12&63|128):t[r++]=o>>12|224,t[r++]=o>>6&63|128),t[r++]=63&o|128);return r-n}},{}],11:[function(e,t,r){var o=e(14),i=e(33);function n(e,t,r,i){var n=!1;if(t.resolvedType)if(t.resolvedType instanceof o){e("switch(d%s){",i);for(var s=t.resolvedType.values,a=Object.keys(s),u=0;u<a.length;++u)s[a[u]]!==t.typeDefault||n||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',i,i,i),t.repeated||e("break"),n=!0),e("case%j:",a[u])("case %i:",s[a[u]])("m%s=%j",i,s[a[u]])("break");e("}")}else e('if(typeof d%s!=="object")',i)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,r,i);else{var l=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",i,i);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,l)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length >= 0)",i)("m%s=d%s",i,i);break;case"string":e("m%s=String(d%s)",i,i);break;case"bool":e("m%s=Boolean(d%s)",i,i)}}return e}function s(e,t,r,i){if(t.resolvedType)t.resolvedType instanceof o?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",i,r,i,i,r,i,i):e("d%s=types[%i].toObject(m%s,o)",i,r,i);else{var n=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":n=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,n?"true":"",i);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:e("d%s=m%s",i,i)}}return e}r.fromObject=function(e){var t=e.fieldsArray,r=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var s=0;s<t.length;++s){var a=t[s].resolve(),u=i.safeProp(a.name);a.map?(r("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u),n(r,a,s,u+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u),n(r,a,s,u+"[i]")("}")("}")):(a.resolvedType instanceof o||r("if(d%s!=null){",u),n(r,a,s,u),a.resolvedType instanceof o||r("}"))}return r("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var r=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],a=[],u=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?n:t[l].map?a:u).push(t[l]);if(n.length){for(r("if(o.arrays||o.defaults){"),l=0;l<n.length;++l)r("d%s=[]",i.safeProp(n[l].name));r("}")}if(a.length){for(r("if(o.objects||o.defaults){"),l=0;l<a.length;++l)r("d%s={}",i.safeProp(a[l].name));r("}")}if(u.length){for(r("if(o.defaults){"),l=0;l<u.length;++l){var p,f=u[l],h=i.safeProp(f.name);f.resolvedType instanceof o?r("d%s=o.enums===String?%j:%j",h,f.resolvedType.valuesById[f.typeDefault],f.typeDefault):f.long?r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",f.typeDefault.low,f.typeDefault.high,f.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",h)("}else")("d%s=o.longs===String?%j:%i",h,f.typeDefault.toString(),f.typeDefault.toNumber()):f.bytes?(p="["+Array.prototype.slice.call(f.typeDefault).join(",")+"]",r("if(o.bytes===String)d%s=%j",h,String.fromCharCode.apply(String,f.typeDefault))("else{")("d%s=%s",h,p)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",h,h)("}")):r("d%s=%j",h,f.typeDefault)}r("}")}var c=!1;for(l=0;l<t.length;++l){f=t[l];var d=e.i.indexOf(f);h=i.safeProp(f.name),f.map?(c||(c=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",h,h)("d%s={}",h)("for(var j=0;j<ks2.length;++j){"),s(r,f,d,h+"[ks2[j]]")("}")):f.repeated?(r("if(m%s&&m%s.length){",h,h)("d%s=[]",h)("for(var j=0;j<m%s.length;++j){",h),s(r,f,d,h+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",h,f.name),s(r,f,d,h),f.partOf&&r("if(o.oneofs)")("d%s=%j",i.safeProp(f.partOf.name),f.name)),r("}")}return r("return d")}},{14:14,33:33}],12:[function(e,t,r){t.exports=function(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e.i[r].resolve(),u=a.resolvedType instanceof o?"int32":a.type,l="m"+s.safeProp(a.name);t("case %i: {",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),i.defaults[a.keyType]!==n?t("k=%j",i.defaults[a.keyType]):t("k=null"),i.defaults[u]!==n?t("value=%j",i.defaults[u]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),i.basic[u]===n?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",u),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),i.long[a.keyType]!==n?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),i.packed[u]!==n&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,u)("}else"),i.basic[u]===n?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,r):t("%s.push(r.%s())",l,u)):i.basic[u]===n?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,r):t("%s=r.%s()",l,u),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e.i.length;++r){var p=e.i[r];p.required&&t("if(!m.hasOwnProperty(%j))",p.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+p.name+"'")}return t("return m")};var o=e(14),i=e(32),s=e(33)},{14:14,32:32,33:33}],13:[function(e,t,r){t.exports=function(e){for(var t,r=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),u=e.fieldsArray.slice().sort(s.compareFieldsById),l=0;l<u.length;++l){var p=u[l].resolve(),f=e.i.indexOf(p),h=p.resolvedType instanceof o?"int32":p.type,c=i.basic[h];t="m"+s.safeProp(p.name),p.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,p.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(p.id<<3|2)>>>0,8|i.mapKey[p.keyType],p.keyType),c===n?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",f,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|c,h,t),r("}")("}")):p.repeated?(r("if(%s!=null&&%s.length){",t,t),p.packed&&i.packed[h]!==n?r("w.uint32(%i).fork()",(p.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",h,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),c===n?a(r,p,f,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(p.id<<3|c)>>>0,h,t)),r("}")):(p.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,p.name),c===n?a(r,p,f,t):r("w.uint32(%i).%s(%s)",(p.id<<3|c)>>>0,h,t))}return r("return w")};var o=e(14),i=e(32),s=e(33);function a(e,t,r,o){t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,o,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,o,(t.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(e,t,r){t.exports=a;var o=e(22),i=(((a.prototype=Object.create(o.prototype)).constructor=a).className="Enum",e(21)),s=e(33);function a(e,t,r,i,s,a){if(o.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=s||{},this.valuesOptions=a,this.reserved=n,t)for(var u=Object.keys(t),l=0;l<u.length;++l)"number"==typeof t[u[l]]&&(this.valuesById[this.values[u[l]]=t[u[l]]]=u[l])}a.fromJSON=function(e,t){return(e=new a(e,t.values,t.options,t.comment,t.comments)).reserved=t.reserved,e},a.prototype.toJSON=function(e){return e=!!e&&!!e.keepComments,s.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:n,"comment",e?this.comment:n,"comments",e?this.comments:n])},a.prototype.add=function(e,t,r,o){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==n)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==n){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return o&&(this.valuesOptions===n&&(this.valuesOptions={}),this.valuesOptions[e]=o||null),this.comments[e]=r||null,this},a.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},a.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},{21:21,22:22,33:33}],15:[function(e,t,r){t.exports=p;var o,i=e(22),s=(((p.prototype=Object.create(i.prototype)).constructor=p).className="Field",e(14)),a=e(32),u=e(33),l=/^required|optional|repeated$/;function p(e,t,r,o,s,p,f){if(u.isObject(o)?(f=s,p=o,o=s=n):u.isObject(s)&&(f=p,p=s,s=n),i.call(this,e,p),!u.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!u.isString(r))throw TypeError("type must be a string");if(o!==n&&!l.test(o=o.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(s!==n&&!u.isString(s))throw TypeError("extend must be a string");this.rule=(o="proto3_optional"===o?"optional":o)&&"optional"!==o?o:n,this.type=r,this.id=t,this.extend=s||n,this.required="required"===o,this.optional=!this.required,this.repeated="repeated"===o,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!u.Long&&a.long[r]!==n,this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.o=null,this.comment=f}p.fromJSON=function(e,t){return new p(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(p.prototype,"packed",{get:function(){return null===this.o&&(this.o=!1!==this.getOption("packed")),this.o}}),p.prototype.setOption=function(e,t,r){return"packed"===e&&(this.o=null),i.prototype.setOption.call(this,e,t,r)},p.prototype.toJSON=function(e){return e=!!e&&!!e.keepComments,u.toObject(["rule","optional"!==this.rule&&this.rule||n,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:n])},p.prototype.resolve=function(){var e;return this.resolved?this:((this.typeDefault=a.defaults[this.type])===n?(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.resolvedType instanceof o?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s)&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault]),this.options&&(!0!==this.options.packed&&(this.options.packed===n||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=n)),this.long?(this.typeDefault=u.Long.fromNumber(this.typeDefault,"u"==(this.type[0]||"")),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(u.base64.test(this.typeDefault)?u.base64.decode(this.typeDefault,e=u.newBuffer(u.base64.length(this.typeDefault)),0):u.utf8.write(this.typeDefault,e=u.newBuffer(u.utf8.length(this.typeDefault)),0),this.typeDefault=e),this.map?this.defaultValue=u.emptyObject:this.repeated?this.defaultValue=u.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof o&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this))},p.d=function(e,t,r,o){return"function"==typeof t?t=u.decorateType(t).name:t&&"object"==typeof t&&(t=u.decorateEnum(t).name),function(i,n){u.decorateType(i.constructor).add(new p(n,e,t,r,{default:o}))}},p.u=function(e){o=e}},{14:14,22:22,32:32,33:33}],16:[function(e,t,r){var o=t.exports=e(17);o.build="light",o.load=function(e,t,r){return(t="function"==typeof t?(r=t,new o.Root):t||new o.Root).load(e,r)},o.loadSync=function(e,t){return(t=t||new o.Root).loadSync(e)},o.encoder=e(13),o.decoder=e(12),o.verifier=e(36),o.converter=e(11),o.ReflectionObject=e(22),o.Namespace=e(21),o.Root=e(26),o.Enum=e(14),o.Type=e(31),o.Field=e(15),o.OneOf=e(23),o.MapField=e(18),o.Service=e(30),o.Method=e(20),o.Message=e(19),o.wrappers=e(37),o.types=e(32),o.util=e(33),o.ReflectionObject.u(o.Root),o.Namespace.u(o.Type,o.Service,o.Enum),o.Root.u(o.Type),o.Field.u(o.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(e,t,r){var o=r;function i(){o.util.u(),o.Writer.u(o.BufferWriter),o.Reader.u(o.BufferReader)}o.build="minimal",o.Writer=e(38),o.BufferWriter=e(39),o.Reader=e(24),o.BufferReader=e(25),o.util=e(35),o.rpc=e(28),o.roots=e(27),o.configure=i,i()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(e,t,r){t.exports=a;var o=e(15),i=(((a.prototype=Object.create(o.prototype)).constructor=a).className="MapField",e(32)),s=e(33);function a(e,t,r,i,a,u){if(o.call(this,e,t,i,n,n,a,u),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){return e=!!e&&!!e.keepComments,s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:n])},a.prototype.resolve=function(){if(this.resolved)return this;if(i.mapKey[this.keyType]===n)throw Error("invalid key type: "+this.keyType);return o.prototype.resolve.call(this)},a.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(o,i){s.decorateType(o.constructor).add(new a(i,e,t,r))}}},{15:15,32:32,33:33}],19:[function(e,t,r){t.exports=i;var o=e(35);function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,o.toJSONOptions)}},{35:35}],20:[function(e,t,r){t.exports=s;var o=e(22),i=(((s.prototype=Object.create(o.prototype)).constructor=s).className="Method",e(33));function s(e,t,r,s,a,u,l,p,f){if(i.isObject(a)?(l=a,a=u=n):i.isObject(u)&&(l=u,u=n),t!==n&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");o.call(this,e,l),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||n,this.responseType=s,this.responseStream=!!u||n,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=p,this.parsedOptions=f}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){return e=!!e&&!!e.keepComments,i.toObject(["type","rpc"!==this.type&&this.type||n,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:n,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),o.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(e,t,r){t.exports=h;var o,i,s,a=e(22),u=(((h.prototype=Object.create(a.prototype)).constructor=h).className="Namespace",e(15)),l=e(33),p=e(23);function f(e,t){if(!e||!e.length)return n;for(var r={},o=0;o<e.length;++o)r[e[o].name]=e[o].toJSON(t);return r}function h(e,t){a.call(this,e,t),this.nested=n,this.h=null}function c(e){return e.h=null,e}h.fromJSON=function(e,t){return new h(e,t.options).addJSON(t.nested)},h.arrayToJSON=f,h.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},h.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(h.prototype,"nestedArray",{get:function(){return this.h||(this.h=l.toArray(this.nested))}}),h.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",f(this.nestedArray,e)])},h.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),a=0;a<r.length;++a)t=e[r[a]],this.add((t.fields!==n?o:t.values!==n?s:t.methods!==n?i:t.id!==n?u:h).fromJSON(r[a],t));return this},h.prototype.get=function(e){return this.nested&&this.nested[e]||null},h.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},h.prototype.add=function(e){if(!(e instanceof u&&e.extend!==n||e instanceof o||e instanceof p||e instanceof s||e instanceof i||e instanceof h))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof h&&e instanceof h)||t instanceof o||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,a=0;a<r.length;++a)e.add(r[a]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return(this.nested[e.name]=e).onAdd(this),c(this)},h.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=n),e.onRemove(this),c(this)},h.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;0<e.length;){var o=e.shift();if(r.nested&&r.nested[o]){if(!((r=r.nested[o])instanceof h))throw Error("path conflicts with non-namespace objects")}else r.add(r=new h(o))}return t&&r.addJSON(t),r},h.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof h?e[t++].resolveAll():e[t++].resolve();return this.resolve()},h.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=n):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var o=this.get(e[0]);if(o){if(1===e.length){if(!t||~t.indexOf(o.constructor))return o}else if(o instanceof h&&(o=o.lookup(e.slice(1),t,!0)))return o}else for(var i=0;i<this.nestedArray.length;++i)if(this.h[i]instanceof h&&(o=this.h[i].lookup(e,t,!0)))return o;return null===this.parent||r?null:this.parent.lookup(e,t)},h.prototype.lookupType=function(e){var t=this.lookup(e,[o]);if(t)return t;throw Error("no such type: "+e)},h.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(t)return t;throw Error("no such Enum '"+e+"' in "+this)},h.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[o,s]);if(t)return t;throw Error("no such Type or Enum '"+e+"' in "+this)},h.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(t)return t;throw Error("no such Service '"+e+"' in "+this)},h.u=function(e,t,r){o=e,i=t,s=r}},{15:15,22:22,23:23,33:33}],22:[function(e,t,r){(t.exports=s).className="ReflectionObject";var o,i=e(33);function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1,(e=e.root)instanceof o&&e.l(this)},s.prototype.onRemove=function(e){(e=e.root)instanceof o&&e.v(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof o&&(this.resolved=!0),this},s.prototype.getOption=function(e){return this.options?this.options[e]:n},s.prototype.setOption=function(e,t,r){return r&&this.options&&this.options[e]!==n||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var o,n,s=this.parsedOptions;return r?(o=s.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)}))?(n=o[e],i.setProperty(n,r,t)):((o={})[e]=i.setProperty({},r,t),s.push(o)):((n={})[e]=t,s.push(n)),this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),o=0;o<r.length;++o)this.setOption(r[o],e[r[o]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s.u=function(e){o=e}},{33:33}],23:[function(e,t,r){t.exports=a;var o=e(22),i=(((a.prototype=Object.create(o.prototype)).constructor=a).className="OneOf",e(15)),s=e(33);function a(e,t,r,i){if(Array.isArray(t)||(r=t,t=n),o.call(this,e,r),t!==n&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function u(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){return e=!!e&&!!e.keepComments,s.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:n])},a.prototype.add=function(e){if(e instanceof i)return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),u(e.partOf=this),this;throw TypeError("field must be a Field")},a.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),-1<(t=this.oneof.indexOf(e.name))&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){o.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this).fieldsArray.push(r)}u(this)},a.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);o.prototype.onRemove.call(this,e)},a.d=function(){for(var e=Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new a(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},{15:15,22:22,33:33}],24:[function(e,t,r){t.exports=u;var o,i=e(35),n=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}function l(){return i.Buffer?function(e){return(u.create=function(e){return i.Buffer.isBuffer(e)?new o(e):f(e)})(e)}:f}var p,f="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")};function h(){var e=new n(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function c(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new n(c(this.buf,this.pos+=4),c(this.buf,this.pos+=4))}u.create=l(),u.prototype.p=i.Array.prototype.subarray||i.Array.prototype.slice,u.prototype.uint32=(p=4294967295,function(){if(p=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(p=(p|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(p=(p|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(p=(p|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(p=(p|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)||!((this.pos+=5)>this.len))return p;throw this.pos=this.len,a(this,10)}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return c(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|c(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this.p.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u.u=function(e){o=e,u.create=l(),o.u();var t=i.Long?"toLong":"toNumber";i.merge(u.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return d.call(this)[t](!0)},sfixed64:function(){return d.call(this)[t](!1)}})}},{35:35}],25:[function(e,t,r){t.exports=n;var o=e(24),i=((n.prototype=Object.create(o.prototype)).constructor=n,e(35));function n(e){o.call(this,e)}n.u=function(){i.Buffer&&(n.prototype.p=i.Buffer.prototype.slice)},n.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},n.u()},{24:24,35:35}],26:[function(e,t,r){t.exports=h;var o,i,s,a=e(21),u=(((h.prototype=Object.create(a.prototype)).constructor=h).className="Root",e(15)),l=e(14),p=e(23),f=e(33);function h(e){a.call(this,"",e),this.deferred=[],this.files=[]}function c(){}h.fromJSON=function(e,t){return t=t||new h,e.options&&t.setOptions(e.options),t.addJSON(e.nested)},h.prototype.resolvePath=f.path.resolve,h.prototype.fetch=f.fetch,h.prototype.load=function e(t,r,o){"function"==typeof r&&(o=r,r=n);var a=this;if(!o)return f.asPromise(e,a,t,r);var u=o===c;function l(e,t){if(o){var r=o;if(o=null,u)throw e;r(e,t)}}function p(e){var t=e.lastIndexOf("google/protobuf/");return-1<t&&(e=e.substring(t))in s?e:null}function h(e,t){try{if(f.isString(t)&&"{"==(t[0]||"")&&(t=JSON.parse(t)),f.isString(t)){i.filename=e;var o,n=i(t,a,r),s=0;if(n.imports)for(;s<n.imports.length;++s)(o=p(n.imports[s])||a.resolvePath(e,n.imports[s]))&&d(o);if(n.weakImports)for(s=0;s<n.weakImports.length;++s)(o=p(n.weakImports[s])||a.resolvePath(e,n.weakImports[s]))&&d(o,!0)}else a.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}u||y||l(null,a)}function d(e,t){if(e=p(e)||e,!~a.files.indexOf(e))if(a.files.push(e),e in s)u?h(e,s[e]):(++y,setTimeout(function(){--y,h(e,s[e])}));else if(u){var r;try{r=f.fs.readFileSync(e).toString("utf8")}catch(r){return void(t||l(r))}h(e,r)}else++y,a.fetch(e,function(r,i){--y,o&&(r?t?y||l(null,a):l(r):h(e,i))})}var y=0;f.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=a.resolvePath("",t[g]))&&d(m);return u?a:(y||l(null,a),n)},h.prototype.loadSync=function(e,t){if(f.isNode)return this.load(e,t,c);throw Error("not supported")},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return a.prototype.resolveAll.call(this)};var d=/^[A-Z]/;function y(e,t){var r,o=t.parent.lookup(t.extend);if(o)return r=new u(t.fullName,t.id,t.type,t.rule,n,t.options),o.get(r.name)||((r.declaringField=t).extensionField=r,o.add(r)),1}h.prototype.l=function(e){if(e instanceof u)e.extend===n||e.extensionField||y(0,e)||this.deferred.push(e);else if(e instanceof l)d.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof p)){if(e instanceof o)for(var t=0;t<this.deferred.length;)y(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this.l(e.h[r]);d.test(e.name)&&(e.parent[e.name]=e)}},h.prototype.v=function(e){var t;if(e instanceof u)e.extend!==n&&(e.extensionField?(e.extensionField.parent.remove(e.extensionField),e.extensionField=null):-1<(t=this.deferred.indexOf(e))&&this.deferred.splice(t,1));else if(e instanceof l)d.test(e.name)&&delete e.parent[e.name];else if(e instanceof a){for(var r=0;r<e.nestedArray.length;++r)this.v(e.h[r]);d.test(e.name)&&delete e.parent[e.name]}},h.u=function(e,t,r){o=e,i=t,s=r}},{14:14,15:15,21:21,23:23,33:33}],27:[function(e,t,r){t.exports={}},{}],28:[function(e,t,r){r.Service=e(29)},{29:29}],29:[function(e,t,r){t.exports=i;var o=e(35);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}((i.prototype=Object.create(o.EventEmitter.prototype)).constructor=i).prototype.rpcCall=function e(t,r,i,s,a){if(!s)throw TypeError("request must be specified");var u=this;if(!a)return o.asPromise(e,u,t,r,i,s);if(!u.rpcImpl)return setTimeout(function(){a(Error("already ended"))},0),n;try{return u.rpcImpl(t,r[u.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(e,r){if(e)return u.emit("error",e,t),a(e);if(null===r)return u.end(!0),n;if(!(r instanceof i))try{r=i[u.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return u.emit("error",e,t),a(e)}return u.emit("data",r,t),a(null,r)})}catch(e){return u.emit("error",e,t),setTimeout(function(){a(e)},0),n}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(e,t,r){t.exports=u;var o=e(21),i=(((u.prototype=Object.create(o.prototype)).constructor=u).className="Service",e(20)),s=e(33),a=e(28);function u(e,t){o.call(this,e,t),this.methods={},this.g=null}function l(e){return e.g=null,e}u.fromJSON=function(e,t){var r=new u(e,t.options);if(t.methods)for(var o=Object.keys(t.methods),n=0;n<o.length;++n)r.add(i.fromJSON(o[n],t.methods[o[n]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},u.prototype.toJSON=function(e){var t=o.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return s.toObject(["options",t&&t.options||n,"methods",o.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||n,"comment",r?this.comment:n])},Object.defineProperty(u.prototype,"methodsArray",{get:function(){return this.g||(this.g=s.toArray(this.methods))}}),u.prototype.get=function(e){return this.methods[e]||o.prototype.get.call(this,e)},u.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return o.prototype.resolve.call(this)},u.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?l((this.methods[e.name]=e).parent=this):o.prototype.add.call(this,e)},u.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return o.prototype.remove.call(this,e)},u.prototype.create=function(e,t,r){for(var o,i=new a.Service(e,t,r),n=0;n<this.methodsArray.length;++n){var u=s.lcFirst((o=this.g[n]).resolve().name).replace(/[^$\w_]/g,"");i[u]=s.codegen(["r","c"],s.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return i}},{20:20,21:21,28:28,33:33}],31:[function(e,t,r){t.exports=b;var o=e(21),i=(((b.prototype=Object.create(o.prototype)).constructor=b).className="Type",e(14)),s=e(23),a=e(15),u=e(18),l=e(30),p=e(19),f=e(24),h=e(38),c=e(33),d=e(13),y=e(12),m=e(36),g=e(11),v=e(37);function b(e,t){o.call(this,e,t),this.fields={},this.oneofs=n,this.extensions=n,this.reserved=n,this.group=n,this.j=null,this.i=null,this.k=null,this.O=null}function w(e){return e.j=e.i=e.k=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(b.prototype,{fieldsById:{get:function(){if(!this.j){this.j={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],o=r.id;if(this.j[o])throw Error("duplicate id "+o+" in "+this);this.j[o]=r}}return this.j}},fieldsArray:{get:function(){return this.i||(this.i=c.toArray(this.fields))}},oneofsArray:{get:function(){return this.k||(this.k=c.toArray(this.oneofs))}},ctor:{get:function(){return this.O||(this.ctor=b.generateConstructor(this)())},set:function(e){for(var t=e.prototype,r=(t instanceof p||((e.prototype=new p).constructor=e,c.merge(e.prototype,t)),e.$type=e.prototype.$type=this,c.merge(e,p,!0),this.O=e,0);r<this.fieldsArray.length;++r)this.i[r].resolve();var o={};for(r=0;r<this.oneofsArray.length;++r)o[this.k[r].resolve().name]={get:c.oneOfGetter(this.k[r].oneof),set:c.oneOfSetter(this.k[r].oneof)};r&&Object.defineProperties(e.prototype,o)}}}),b.generateConstructor=function(e){for(var t,r=c.codegen(["p"],e.name),o=0;o<e.fieldsArray.length;++o)(t=e.i[o]).map?r("this%s={}",c.safeProp(t.name)):t.repeated&&r("this%s=[]",c.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},b.fromJSON=function(e,t){for(var r=new b(e,t.options),p=(r.extensions=t.extensions,r.reserved=t.reserved,Object.keys(t.fields)),f=0;f<p.length;++f)r.add((void 0!==t.fields[p[f]].keyType?u:a).fromJSON(p[f],t.fields[p[f]]));if(t.oneofs)for(p=Object.keys(t.oneofs),f=0;f<p.length;++f)r.add(s.fromJSON(p[f],t.oneofs[p[f]]));if(t.nested)for(p=Object.keys(t.nested),f=0;f<p.length;++f){var h=t.nested[p[f]];r.add((h.id!==n?a:h.fields!==n?b:h.values!==n?i:h.methods!==n?l:o).fromJSON(p[f],h))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},b.prototype.toJSON=function(e){var t=o.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return c.toObject(["options",t&&t.options||n,"oneofs",o.arrayToJSON(this.oneofsArray,e),"fields",o.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:n,"reserved",this.reserved&&this.reserved.length?this.reserved:n,"group",this.group||n,"nested",t&&t.nested||n,"comment",r?this.comment:n])},b.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return o.prototype.resolveAll.call(this)},b.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},b.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&e.extend===n){if((this.j||this.fieldsById)[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),(this.fields[e.name]=e).message=this,e.onAdd(this),w(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),(this.oneofs[e.name]=e).onAdd(this),w(this)):o.prototype.add.call(this,e)},b.prototype.remove=function(e){if(e instanceof a&&e.extend===n){if(this.fields&&this.fields[e.name]===e)return delete this.fields[e.name],e.parent=null,e.onRemove(this),w(this);throw Error(e+" is not a member of "+this)}if(e instanceof s){if(this.oneofs&&this.oneofs[e.name]===e)return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),w(this);throw Error(e+" is not a member of "+this)}return o.prototype.remove.call(this,e)},b.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},b.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)},b.prototype.create=function(e){return new this.ctor(e)},b.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this.i[r].resolve().resolvedType);var o;return this.encode=d(this)({Writer:h,types:t,util:c}),this.decode=y(this)({Reader:f,types:t,util:c}),this.verify=m(this)({types:t,util:c}),this.fromObject=g.fromObject(this)({types:t,util:c}),this.toObject=g.toObject(this)({types:t,util:c}),(e=v[e])&&((o=Object.create(this)).fromObject=this.fromObject,this.fromObject=e.fromObject.bind(o),o.toObject=this.toObject,this.toObject=e.toObject.bind(o)),this},b.prototype.encode=function(e,t){return this.setup().encode(e,t)},b.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},b.prototype.decode=function(e,t){return this.setup().decode(e,t)},b.prototype.decodeDelimited=function(e){return e instanceof f||(e=f.create(e)),this.decode(e,e.uint32())},b.prototype.verify=function(e){return this.setup().verify(e)},b.prototype.fromObject=function(e){return this.setup().fromObject(e)},b.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},b.d=function(e){return function(t){c.decorateType(t,e)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(e,t,r){e=e(33);var o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function i(e,t){var r=0,i={};for(t|=0;r<e.length;)i[o[r+t]]=e[r++];return i}r.basic=i([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=i([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",e.emptyArray,null]),r.long=i([0,0,0,1,1],7),r.mapKey=i([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=i([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(e,t,r){var o,i,s=t.exports=e(35),a=e(27),u=(s.codegen=e(3),s.fetch=e(5),s.path=e(8),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=Array(t.length),o=0;o<t.length;)r[o]=e[t[o++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var o=e[r++],i=e[r++];i!==n&&(t[o]=i)}return t},/\\/g),l=/"/g,p=(s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(u,"\\\\").replace(l,'\\"')+'"]':"."+e},s.ucFirst=function(e){return(e[0]||"").toUpperCase()+e.substring(1)},/_([a-z])/g),f=(s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(p,function(e,t){return t.toUpperCase()})},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(t,r){return t.$type?(r&&t.$type.name!==r&&(s.decorateRoot.remove(t.$type),t.$type.name=r,s.decorateRoot.add(t.$type)),t.$type):(r=new(o=o||e(31))(r||t.name),s.decorateRoot.add(r),r.ctor=t,Object.defineProperty(t,"$type",{value:r,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:r,enumerable:!1}),r)},0);s.decorateEnum=function(t){var r;return t.$type||(r=new(i=i||e(14))("Enum"+f++,t),s.decorateRoot.add(r),Object.defineProperty(t,"$type",{value:r,enumerable:!1}),r)},s.setProperty=function(e,t,r){if("object"!=typeof e)throw TypeError("dst must be an object");if(t)return function e(t,r,o){var i=r.shift();return"__proto__"!==i&&"prototype"!==i&&(0<r.length?t[i]=e(t[i]||{},r,o):((r=t[i])&&(o=[].concat(r).concat(o)),t[i]=o)),t}(e,t=t.split("."),r);throw TypeError("path must be specified")},Object.defineProperty(s,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(e(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(e,t,r){t.exports=i;var o=e(35);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=i.zero=new i(0,0),s=(n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1},i.zeroHash="\0\0\0\0\0\0\0\0",i.fromNumber=function(e){var t,r;return 0===e?n:(r=(e=(t=e<0)?-e:e)>>>0,e=(e-r)/4294967296>>>0,t&&(e=~e>>>0,r=~r>>>0,4294967295<++r)&&(r=0,4294967295<++e)&&(e=0),new i(r,e))},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(o.isString(e)){if(!o.Long)return i.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):n},i.prototype.toNumber=function(e){var t;return!e&&this.hi>>>31?(e=1+~this.lo>>>0,t=~this.hi>>>0,-(e+4294967296*(t=e?t:t+1>>>0))):this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}},String.prototype.charCodeAt);i.fromHash=function(e){return"\0\0\0\0\0\0\0\0"===e?n:new i((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0==r?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},{35:35}],35:[function(e,t,r){var o=r;function i(e,t,r){for(var o=Object.keys(t),i=0;i<o.length;++i)e[o[i]]!==n&&r||(e[o[i]]=t[o[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:n,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}o.asPromise=e(1),o.base64=e(2),o.EventEmitter=e(4),o.float=e(6),o.inquire=e(7),o.utf8=e(10),o.pool=e(9),o.LongBits=e(34),o.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),o.global=o.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==typeof e},o.isset=o.isSet=function(e,t){var r=e[t];return null!=r&&e.hasOwnProperty(t)&&("object"!=typeof r||0<(Array.isArray(r)?r:Object.keys(r)).length)},o.Buffer=null,o.A=null,o.T=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o.T(e):new o.Array(e):o.Buffer?o.A(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){return e=o.LongBits.fromHash(e),o.Long?o.Long.fromBits(e.lo,e.hi,t):e.toNumber(!!t)},o.merge=i,o.lcFirst=function(e){return(e[0]||"").toLowerCase()+e.substring(1)},o.newError=s,o.ProtocolError=s("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;-1<r;--r)if(1===t[e[r]]&&this[e[r]]!==n&&null!==this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o.u=function(){var e=o.Buffer;e?(o.A=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o.T=e.allocUnsafe||function(t){return new e(t)}):o.A=o.T=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(e,t,r){t.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r={};e.oneofsArray.length&&t("var p={}");for(var o=0;o<e.fieldsArray.length;++o){var a,u=e.i[o].resolve(),l="m"+i.safeProp(u.name);u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,u.name),u.map?(t("if(!util.isObject(%s))",l)("return%j",n(u,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),function(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",n(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",n(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",n(t,"boolean key"))}}(t,u,"k[i]"),s(t,u,o,l+"[k[i]]")("}")):u.repeated?(t("if(!Array.isArray(%s))",l)("return%j",n(u,"array"))("for(var i=0;i<%s.length;++i){",l),s(t,u,o,l+"[i]")("}")):(u.partOf&&(a=i.safeProp(u.partOf.name),1===r[u.partOf.name]&&t("if(p%s===1)",a)("return%j",u.partOf.name+": multiple values"),r[u.partOf.name]=1,t("p%s=1",a)),s(t,u,o,l)),u.optional&&t("}")}return t("return null")};var o=e(14),i=e(33);function n(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,r,i){if(t.resolvedType)if(t.resolvedType instanceof o){e("switch(%s){",i)("default:")("return%j",n(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",n(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",n(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",n(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",n(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",n(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",n(t,"buffer"))}return e}},{14:14,33:33}],37:[function(e,t,r){var o=e(19);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t,r=e["@type"].substring(1+e["@type"].lastIndexOf("/"));if(r=this.lookup(r))return~(t="."==(e["@type"][0]||"")?e["@type"].slice(1):e["@type"]).indexOf("/")||(t="/"+t),this.create({type_url:t,value:r.encode(r.fromObject(e)).finish()})}return this.fromObject(e)},toObject:function(e,t){var r,i,n="",s="";return!((e=t&&t.json&&e.type_url&&e.value&&(s=e.type_url.substring(1+e.type_url.lastIndexOf("/")),n=e.type_url.substring(0,1+e.type_url.lastIndexOf("/")),r=this.lookup(s))?r.decode(e.value):e)instanceof this.ctor)&&e instanceof o?(r=e.$type.toObject(e,t),i="."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName,r["@type"]=s=(n=""===n?"type.googleapis.com/":n)+i,r):this.toObject(e,t)}}},{19:19}],38:[function(e,t,r){t.exports=h;var o,i=e(35),s=i.LongBits,a=i.base64,u=i.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=n,this.val=r}function p(){}function f(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new l(p,0,0),this.tail=this.head,this.states=null}function c(){return i.Buffer?function(){return(h.create=function(){return new o})()}:function(){return new h}}function d(e,t,r){t[r]=255&e}function y(e,t){this.len=e,this.next=n,this.val=t}function m(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}h.create=c(),h.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype.S=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},(y.prototype=Object.create(l.prototype)).fn=function(e,t,r){for(;127<e;)t[r++]=127&e|128,e>>>=7;t[r]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new y((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this.S(m,10,s.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.int64=h.prototype.uint64=function(e){return e=s.from(e),this.S(m,e.length(),e)},h.prototype.sint64=function(e){return e=s.from(e).zzEncode(),this.S(m,e.length(),e)},h.prototype.bool=function(e){return this.S(d,1,e?1:0)},h.prototype.sfixed32=h.prototype.fixed32=function(e){return this.S(g,4,e>>>0)},h.prototype.sfixed64=h.prototype.fixed64=function(e){return e=s.from(e),this.S(g,4,e.lo).S(g,4,e.hi)},h.prototype.float=function(e){return this.S(i.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this.S(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var o=0;o<e.length;++o)t[r+o]=e[o]};h.prototype.bytes=function(e){var t,r=e.length>>>0;return r?(i.isString(e)&&(t=h.alloc(r=a.length(e)),a.decode(e,t,0),e=t),this.uint32(r).S(v,r,e)):this.S(d,1,0)},h.prototype.string=function(e){var t=u.length(e);return t?this.uint32(t).S(u.write,t,e):this.S(d,1,0)},h.prototype.fork=function(){return this.states=new f(this),this.head=this.tail=new l(p,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(p,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},h.u=function(e){o=e,h.create=c(),o.u()}},{35:35}],39:[function(e,t,r){t.exports=n;var o=e(38),i=((n.prototype=Object.create(o.prototype)).constructor=n,e(35));function n(){o.call(this)}function s(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}n.u=function(){n.alloc=i.T,n.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var o=0;o<e.length;)t[r++]=e[o++]}},n.prototype.bytes=function(e){var t=(e=i.isString(e)?i.A(e,"base64"):e).length>>>0;return this.uint32(t),t&&this.S(n.writeBytesBuffer,t,e),this},n.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this.S(s,t,e),this},n.u()},{35:35,38:38}]},a={},i=function e(t){var r=a[t];return r||s[t][0].call(r=a[t]={exports:{}},e,r,r.exports),r.exports}(16);const u=new class{constructor(){this._typeStore=new Map}getSchemaType(e){t.utility.requireArgument(e,"schema");const r=t.schemaUtil.getSchemaId(e);let o=this._typeStore.get(r);if(!o){o=i.Root.fromJSON(e.pbjsSchema).lookupType(r),this._typeStore.set(r,o)}return o}validate(e,r){t.utility.requireArgument(e,"schema"),t.utility.requireArgument(r,"data");const o=this.getSchemaType(e),i=o.verify(r);if(i)throw new Error(`Data is invalid for ${o.fullName}: ${i}`);return o}encode(e,t){const r=this.validate(e,t),o=r.fromObject(t);return r.encode(o).finish()}encodePayload(e){if((null==e?void 0:e.schema)&&e.payload)return{schemaName:t.schemaUtil.getSchemaId(e.schema),payload:this.encode(e.schema,e.payload)}}getLogMessage(e,t,r){return{timestamp:r.timestamp,data:this.encode(e,t),age:r.age,rootId:r.rootId,seq:r.sequence,sseq:r.schemaSequence,loggerName:r.loggerName,pagePayload:this.encodePayload(r.pagePayload),loggerAppName:r.loggerAppName,connectionType:r.connectionType,appPayload:this.encodePayload(r.appPayload),csId:r.clientSessionId,recCsId:r.receiverClientSessionId,recRootId:r.receiverRootId}}processRawLogMessage(e,r){const o=r.data?Object.assign({},r.data):{};return t.schemaUtil.isInternal(e)&&o.userPayload&&(o.userPayload=this.encodePayload(o.userPayload)),Object.assign({},r,{data:this.encode(e,o),pagePayload:this.encodePayload(r.pagePayload),appPayload:this.encodePayload(r.appPayload)})}},l=i.Root.fromJSON(o.coreEnvelopeSchema.pbjsSchema).lookupType("CoreEnvelope");function p(e){const t=Object.assign({},e,{messages:new Map});return e.messages.forEach(function(e,r){t.messages.set(r,e.map(e=>u.processRawLogMessage(r,e)))}),t}function f(e){return r.CoreEnvelopeBuilder.buildFrom(e)}function h(e){const t=l.verify(e);if(t)throw new Error(`Invalid CoreEnvelope: ${t}`);return l.encode(e).finish()}var c;!function(e){e[e.fetchBinary=0]="fetchBinary",e[e.fetchFile=1]="fetchFile",e[e.noUpload=2]="noUpload"}(c||(c={}));const d="telemetry",y=c.fetchBinary;e.CoreCollector=class{constructor(e,r,o,i){this._messagesLimit=10,this._metricsLimit=10,this._formDataKey=d,this._uploadInterval=1e4,this._messageSize=0,this.uploadEndpoint=e,this.uploadMode=null==r?y:r,o&&(this._staticAttributes={appName:o.appName,appVersion:o.appVersion,appExperience:o.appExperience,deviceId:o.deviceId,deviceModel:o.deviceModel,sdkVersion:o.sdkVersion});let n=1e4;if(i){const e=i.maxUniqueSchemas;if(void 0!==e){if("number"!=typeof e||!(e>0))throw new Error("options.maxUniqueSchemas, if defined, must be > 0");n=e}const r=i.messagesLimit;if(void 0!==r){if("number"!=typeof r||!(r>0))throw new Error("options.messagesLimit, if defined, must be > 0");this._messagesLimit=r}const o=i.metricsLimit;if(void 0!==o){if("number"!=typeof o||!(o>0))throw new Error("options.metricsLimit, if defined, must be > 0");this._metricsLimit=o}t.utility.requireArgumentIfDefined(i.formDataKeyName,"options.formDataKeyName","string")&&(this._formDataKey=i.formDataKeyName),t.utility.requireArgumentIfDefined(i.uploadFailedListener,"options.uploadFailedListener","function")&&(this._uploadFailedListener=i.uploadFailedListener)}this._messageBuffers=new t.LazyMapToList(n),this._emptySize=this.getByteSize(1),this._restartTimer()}get uploadInterval(){return this._uploadInterval}set uploadInterval(e){if(void 0===e&&(e=1e4),"number"!=typeof e||!(e>0))throw new Error("uploadInterval, if defined, must be > 0");e!==this._uploadInterval&&(this._uploadInterval=e,this._restartTimer())}get uploadEndpoint(){return this._uploadEndpoint}set uploadEndpoint(e){t.utility.requireArgumentIfDefined(e,"uploadEndpoint","string"),this._uploadEndpoint=e}get uploadOptionsCallback(){return this._uploadOptionsCallback}set uploadOptionsCallback(e){t.utility.requireArgumentIfDefined(e,"uploadOptionsCallback","function"),this._uploadOptionsCallback=e}get uploadMode(){return this._uploadMode}set uploadMode(e){if(t.utility.requireArgumentIfDefined(e,"uploadMode","number"),void 0===e&&(e=y),!(e in c))throw new Error(`Unsupported upload mode: ${e}`);this._uploadMode=e}getByteSize(e){return e>=1?this._buildProtoEncodedCoreEnvelope(!1).byteLength:e>=.5?this._emptySize+this._messageSize+8*this.metricsCount:this._emptySize+this._messageSize}_stopTimer(){void 0!==this._intervalHandle&&(clearInterval(this._intervalHandle),this._intervalHandle=void 0)}_restartTimer(){this._stopTimer(),this._intervalHandle=setInterval(()=>{this.hasData&&this._upload()},this._uploadInterval)}async collect(e,r,o){t.schemaUtil.isInternal(e)&&r.userPayload&&(r.userPayload=u.encodePayload(r.userPayload));const i=u.getLogMessage(e,r,o);if(!this._messageBuffers.push(e,i))throw new Error(`Buffer is full. Refusing schemaId ${t.schemaUtil.getSchemaId(e)}`);if(this._messageSize+=t.utility.estimateObjectSize(i),this._shouldUpload())return this._upload()}_shouldUpload(){return this._immediateUpload&&this.hasData||this.messagesCount>=this._messagesLimit||this.metricsCount>=this._metricsLimit}async _upload(e){if(this._restartTimer(),!this._uploadEndpoint||this._uploadMode===c.noUpload)return;const t=this._getContentsOfCoreEnvelope(!0);return this._uploadContents(t,e)}async _uploadContents(e,t){let r=this._getRequestInit(e);const o={envelopeContents:e};try{if(this._uploadOptionsCallback){const e=this._uploadOptionsCallback()||{};if(e){if(e.headers&&r.headers)if(e.headers instanceof Headers)for(const t in r.headers)Object.prototype.hasOwnProperty.call(r.headers,t)&&e.headers.set(t,r.headers[t]);else{if(Array.isArray(e.headers))throw new Error("Headers as array is not supported.");Object.assign(e.headers,r.headers)}e.method=r.method,e.body=r.body,r=e}}if(o.response=await fetch(this._uploadEndpoint,r),!o.response.ok)throw new Error("HTTP Not OK");return o}catch(e){if(o.error=e,!t&&this._uploadFailedListener)try{this._uploadFailedListener(o)}catch(e){}throw o}}_getRequestInit(e){const t=h(f(e));let r;switch(this._uploadMode){case c.fetchBinary:r={method:"POST",headers:{"Content-Type":"application/octet-stream"},body:t};break;case void 0:case c.fetchFile:if("function"!=typeof FormData)throw new Error("FormData is not a function in the global namespace.");const e=new FormData;e.append(this._formDataKey||d,new Blob([t])),r={method:"POST",body:e};break;case c.noUpload:default:throw new Error("Invalid uploadMode")}return r}_checkUploadState(){if(void 0===this._uploadEndpoint)throw new Error("Upload endpoint is unset");if(this._uploadMode===c.noUpload)throw new Error("Upload mode is unset")}async upload(e){return this._checkUploadState(),t.utility.requireArgumentIfDefined(e,"contents","object")?this._uploadContents(e,!0):this.hasData?this._upload(!0):void 0}get hasData(){return this.messagesCount>0||this.metricsCount>0}get messagesCount(){return this._messageBuffers.totalItemCount}get metricsCount(){let e=0;return this._metricsExtractors&&(e+=this._metricsExtractors.getAllUpCounters().length||0,e+=this._metricsExtractors.getAllValueRecorders().length||0,e+=this._metricsExtractors.getAllBucketHistograms().length||0),e}getProtoEncodedCoreEnvelope(){return this._buildProtoEncodedCoreEnvelope(!0)}getContentsOfCoreEnvelope(){return this._getContentsOfCoreEnvelope(!0)}_getContentsOfCoreEnvelope(e){const t={staticAttributes:this._staticAttributes,messages:this._messageBuffers.getAllMessages(e)};return this._metricsExtractors&&(t.upCounters=r.CoreEnvelopeBuilder.getUpCounters(this._metricsExtractors.getAllUpCounters(),e),t.valueRecorders=r.CoreEnvelopeBuilder.getValueRecorders(this._metricsExtractors.getAllValueRecorders(),e),t.bucketHistograms=r.CoreEnvelopeBuilder.getBucketHistograms(this._metricsExtractors.getAllBucketHistograms(),e)),e&&(this._messageSize=0),t}_buildProtoEncodedCoreEnvelope(e){return h(f(this._getContentsOfCoreEnvelope(e)))}receiveMetricsExtractors(e){this._metricsExtractors=e}},e.HybridCollector=class{constructor(){if("undefined"==typeof __nimbus)throw new Error("Nimbus is unavailable");if(!__nimbus.plugins||!__nimbus.plugins.observability)throw new Error("Observability plugin not found in Nimbus plugins");this._observability=__nimbus.plugins.observability,setInterval(()=>{this._collectMetrics()},3e4)}collect(e,r,o){t.schemaUtil.isInternal(e)&&r.userPayload&&(r.userPayload=u.encodePayload(r.userPayload));const i=u.getLogMessage(e,r,o),n={timestamp:o.timestamp,rootId:o.rootId,sequence:o.sequence,schemaSequence:o.schemaSequence,loggerName:o.loggerName,pagePayload:i.pagePayload,loggerAppName:o.loggerAppName,connectionType:o.connectionType,appPayload:i.appPayload,clientSessionId:o.clientSessionId,age:o.age,receiverClientSessionId:o.receiverClientSessionId,receiverRootId:o.receiverRootId};this._observability.log(t.schemaUtil.getSchemaId(e),i.data,n)}receiveMetricsExtractors(e){this._metricsExtractors=e}notifyIdleDetected(e){this._observability.idleDetected(e)}_collectMetrics(){if(this._metricsExtractors){const e=this._metricsExtractors.getAllUpCounters(),t=this._metricsExtractors.getAllValueRecorders(),r=this._metricsExtractors.getAllBucketHistograms(),o=[],i=[],n=[];for(const e of t){const t={name:e.getName(),createdTimestamp:e.getCreatedOn(),lastUpdatedTimestamp:e.getLastUpdatedOn(),values:e.getData(),ownerName:e.getOwnerName(),ownerAppName:e.getOwnerAppName(),tags:this._getMetricTags(e)};o.push(t),e.reset()}for(const t of e){const e={name:t.getName(),createdTimestamp:t.getCreatedOn(),lastUpdatedTimestamp:t.getLastUpdatedOn(),value:t.getData(),ownerName:t.getOwnerName(),ownerAppName:t.getOwnerAppName(),tags:this._getMetricTags(t)};i.push(e),t.reset()}for(const e of r){const t={name:e.getName(),createdTimestamp:e.getCreatedOn(),lastUpdatedTimestamp:e.getLastUpdatedOn(),values:e.getData(),buckets:e.getBuckets(),ownerName:e.getOwnerName(),ownerAppName:e.getOwnerAppName(),tags:this._getMetricTags(e)};n.push(t),e.reset()}if(o.length>0||i.length>0){const e={upCounters:i,valueRecorders:o,bucketHistograms:n};this._observability.logMetrics(e)}}}_getMetricTags(e){const t=e.getTags();return t?Object.entries(t).map(e=>({name:e[0],value:e[1].toString()})):[]}},e.encodeCoreEnvelopeContentsRaw=function(e){return h(f(p(e)))},e.processRawContents=p,Object.defineProperty(e,"__esModule",{value:!0})});
})();